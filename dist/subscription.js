import{d as N,r as v,c,w as $,o as V,a as o,b as l,f as t,e as p,i as g,t as i,j as y,n as x,k as R,v as U,F as M,l as j,g as H,h as O}from"./chunks/globals.CKoF2EfL.js";import{t as b,A as f}from"./chunks/analytics.DCHOTgQV.js";const W={class:"min-h-screen bg-gray-50 dark:bg-charcoal-800 py-8"},z={class:"max-w-7xl mx-auto px-4"},Y={key:0,class:"max-w-4xl mx-auto mb-12"},J={class:"text-center mb-6"},K={class:"text-3xl font-bold text-gray-900 dark:text-white mb-2"},q={class:"text-lg text-gray-600 dark:text-gray-400"},G={class:"mb-6 px-4"},Q=["min","max"],X={class:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-2"},Z={key:0,class:"grid grid-cols-2 md:grid-cols-5 gap-3 mb-6"},ee=["onClick"],te={class:"text-sm font-semibold text-gray-900 dark:text-white"},re={class:"text-xs text-gray-600 dark:text-gray-400"},ae={key:1,class:"text-center py-12"},se={key:2,class:"max-w-md mx-auto text-center py-12"},oe={class:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6"},le={class:"text-red-600 dark:text-red-400"},ie={key:3,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-7xl mx-auto mb-12"},ne={key:0,class:"absolute -top-3 left-1/2 transform -translate-x-1/2"},de={class:"text-center mb-6"},ce={class:"text-4xl font-bold text-gray-900 dark:text-white mb-2"},ue={class:"text-gray-600 dark:text-gray-400"},ge={class:"space-y-3 mb-8 flex-grow"},xe={class:"flex items-center text-sm text-gray-700 dark:text-gray-300"},me={class:"flex items-center text-sm text-gray-700 dark:text-gray-300"},ye=["disabled"],ve={key:0},pe={key:1},be={key:2,class:"w-full p-3 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-lg mt-auto text-center text-sm"},fe={key:0,class:"absolute -top-3 left-1/2 transform -translate-x-1/2"},he={class:"text-center mb-6"},ke={class:"text-4xl font-bold text-gray-900 dark:text-white mb-2"},_e={class:"text-gray-600 dark:text-gray-400"},we={class:"space-y-3 mb-8 flex-grow"},Pe={class:"flex items-center text-sm text-gray-700 dark:text-gray-300"},Se={class:"flex items-center text-sm text-gray-700 dark:text-gray-300"},Ce=["disabled"],Le={key:0},Te={key:1},Ee={key:2,class:"w-full p-3 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-lg mt-auto text-center text-sm"},Fe={key:0,class:"absolute -top-3 left-1/2 transform -translate-x-1/2"},Ae={class:"text-center mb-6"},Be={class:"text-4xl font-bold text-gray-900 dark:text-white mb-2"},Ie={class:"text-gray-600 dark:text-gray-400"},De={class:"space-y-3 mb-8 flex-grow"},Ne={class:"flex items-center text-sm text-gray-700 dark:text-gray-300"},$e={class:"flex items-center text-sm text-gray-700 dark:text-gray-300"},Ve=["disabled"],Re={key:0},Ue={key:1},Me={key:2,class:"w-full p-3 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-lg mt-auto text-center text-sm"},je=N({__name:"SubscriptionPage",setup(S){const s=v(500),h=v([]),a=v(null),d=v(!1),u=v(null),C=c(()=>{if(!a.value)return 0;const r=s.value,e=a.value;return r>=500?r*e.premium_rate:0}),n=c(()=>{if(!a.value)return"Free";const r=s.value;return r>=1e4?"Pro":r>=2e3?"Premium":r>=500?"Light":"Free"}),L=c(()=>n.value==="Premium"||n.value==="Pro"),T=c(()=>n.value==="Pro"||n.value==="Light"),E=c(()=>n.value==="Light"||n.value==="Premium"),B=c(()=>{if(!a.value)return 0;const r=a.value,e=s.value;return e>=500&&e<2e3?e*r.premium_rate:e>=2e3?1999*r.premium_rate:500*r.premium_rate}),I=c(()=>{if(!a.value)return 0;const r=a.value,e=s.value;return e>=2e3&&e<1e4?e*r.premium_rate:e>=1e4?9999*r.premium_rate:2e3*r.premium_rate}),D=c(()=>{if(!a.value)return 0;const r=a.value,e=s.value;return e>=1e4?e*r.premium_rate:1e4*r.premium_rate}),k=c(()=>{const r=s.value;return r>=500&&r<2e3?r:r>=2e3?1999:500}),_=c(()=>{const r=s.value;return r>=2e3&&r<1e4?r:r>=1e4?9999:2e3}),w=c(()=>{const r=s.value;return r>=1e4?r:1e4}),F=async()=>{d.value=!0,u.value=null;try{const r=await fetch("/api/credit-packages");if(!r.ok)throw new Error(`Failed to fetch credit packages: ${r.statusText}`);const e=await r.json();h.value=e.packages||[],a.value=e.slider_config||null,a.value&&(s.value=a.value.min)}catch(r){u.value=r instanceof Error?r.message:"Failed to load pricing data",console.error("[Subscription Page] Error fetching credit packages:",r)}finally{d.value=!1}},P=async()=>{d.value=!0,u.value=null,b(f.CREDIT_PURCHASE_INITIATED,{credits:s.value,tier:n.value,price:C.value});try{const r=await fetch("/api/create-credit-checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credits:s.value})});if(!r.ok)throw new Error(`Failed to create checkout: ${r.statusText}`);const e=await r.json();if(e.url)window.location.href=e.url;else throw new Error("No checkout URL returned")}catch(r){u.value=r instanceof Error?r.message:"Failed to create checkout",console.error("[Subscription Page] Error creating checkout:",r),b(f.CREDIT_PURCHASE_FAILED,{credits:s.value,tier:n.value,error:u.value}),alert(`Error: ${u.value}`)}finally{d.value=!1}};return $(n,(r,e)=>{e&&r!==e&&b(f.TIER_SELECTED,{tier:r,credits:s.value,price:C.value})}),V(()=>{b(f.SUBSCRIPTION_VIEW),F()}),(r,e)=>(l(),o("div",W,[t("div",z,[e[19]||(e[19]=p('<div class="text-center mb-12"><h1 class="text-4xl font-bold text-gray-900 dark:text-white mb-4"> Choose Your Plan </h1><p class="text-xl text-gray-600 dark:text-gray-300 mb-4"> Scale your TTS usage as you grow </p><div class="inline-flex items-center gap-2 px-4 py-2 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg"><span class="text-blue-600 dark:text-blue-400">ℹ️</span><p class="text-sm font-medium text-blue-700 dark:text-blue-300"> All purchases are valid for one year from date of purchase </p></div></div>',1)),a.value?(l(),o("div",Y,[t("div",J,[t("div",K,i(s.value.toLocaleString())+" credits ",1),t("div",q,[y(i((s.value*a.value.characters_per_credit).toLocaleString())+" characters ",1),e[1]||(e[1]=t("span",{class:"mx-2"},"•",-1)),t("span",{class:x(["font-semibold",n.value==="Pro"?"text-amber-500":"text-gray-900 dark:text-white"])},i(n.value)+" Tier ",3)])]),t("div",G,[R(t("input",{type:"range","onUpdate:modelValue":e[0]||(e[0]=m=>s.value=m),min:a.value.min,max:a.value.max,step:100,class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 accent-gray-800 dark:accent-gray-300"},null,8,Q),[[U,s.value,void 0,{number:!0}]]),t("div",X,[t("span",null,i(a.value.min.toLocaleString()),1),t("span",null,i(a.value.max.toLocaleString()),1)])]),h.value.length>0?(l(),o("div",Z,[(l(!0),o(M,null,j(h.value,m=>(l(),o("button",{key:m.credits,onClick:Oe=>s.value=m.credits,class:x(["p-3 rounded-lg border-2 transition",s.value===m.credits?"border-gray-800 dark:border-gray-300 bg-gray-100 dark:bg-charcoal-600":"border-gray-300 dark:border-gray-600 hover:border-gray-600 dark:hover:border-gray-400"])},[t("div",te,i((m.credits/1e3).toFixed(0))+"K ",1),t("div",re," $"+i(m.price.toFixed(2)),1)],10,ee))),128))])):g("",!0)])):g("",!0),d.value&&!a.value?(l(),o("div",ae,[...e[2]||(e[2]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-800 dark:border-gray-300 mx-auto"},null,-1),t("p",{class:"text-gray-600 dark:text-gray-400 mt-4"},"Loading pricing options...",-1)])])):g("",!0),u.value&&!a.value?(l(),o("div",se,[t("div",oe,[t("p",le,i(u.value),1),t("button",{onClick:F,class:"mt-4 px-4 py-2 bg-gray-800 dark:bg-gray-200 text-white dark:text-black rounded-lg hover:bg-gray-900 dark:hover:bg-white"}," Try Again ")])])):g("",!0),a.value?(l(),o("div",ie,[e[18]||(e[18]=p('<div class="bg-white dark:bg-charcoal-700 rounded-xl shadow-lg p-6 border-2 border-gray-200 dark:border-charcoal-600 flex flex-col h-full"><div class="text-center mb-6"><h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">Free</h3><div class="text-4xl font-bold text-gray-900 dark:text-white mb-2">$0</div><p class="text-gray-600 dark:text-gray-400">Forever free</p></div><ul class="space-y-3 mb-8 flex-grow"><li class="flex items-center text-sm text-gray-700 dark:text-gray-300"><span class="text-green-500 mr-2">✓</span> Browser TTS </li><li class="flex items-center text-sm text-gray-700 dark:text-gray-300"><span class="text-green-500 mr-2">✓</span> Basic voices </li><li class="flex items-center text-sm text-gray-700 dark:text-gray-300"><span class="text-green-500 mr-2">✓</span> Highlighting </li></ul><button class="w-full p-3 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg mt-auto cursor-not-allowed" disabled> Current Plan </button></div>',1)),t("div",{class:x(["bg-white dark:bg-charcoal-900 rounded-xl shadow-lg p-6 border-2 relative flex flex-col h-full",[n.value==="Light"?"border-gray-800 dark:border-gray-300 transform hover:scale-105 transition":"border-gray-300 dark:border-gray-600",L.value?"opacity-60":""]])},[n.value==="Light"?(l(),o("div",ne,[...e[3]||(e[3]=[t("span",{class:"bg-gradient-to-r from-gray-700 to-gray-900 dark:from-gray-300 dark:to-gray-100 text-white dark:text-black px-4 py-1 rounded-full text-sm font-medium"}," Selected ",-1)])])):g("",!0),t("div",de,[e[4]||(e[4]=t("h3",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-2"},"Light",-1)),t("div",ce," $"+i(B.value.toFixed(2)),1),t("p",ue,i(k.value.toLocaleString())+" credits ",1)]),t("ul",ge,[t("li",xe,[e[5]||(e[5]=t("span",{class:"text-green-500 mr-2"},"✓",-1)),y(" "+i((k.value*(a.value?.characters_per_credit||1e3)).toLocaleString())+" characters ",1)]),t("li",me,[e[6]||(e[6]=t("span",{class:"text-green-500 mr-2"},"✓",-1)),y(" Approx. "+i(Math.round(k.value*(a.value?.characters_per_credit||1e3)/750/60))+" hours of audio ",1)]),e[7]||(e[7]=p('<li class="flex items-center text-sm text-gray-700 dark:text-gray-300"><span class="text-green-500 mr-2">✓</span> Standard voices </li><li class="flex items-center text-sm text-gray-700 dark:text-gray-300"><span class="text-green-500 mr-2">✓</span> Word highlighting </li><li class="flex items-center text-sm text-gray-700 dark:text-gray-300"><span class="text-green-500 mr-2">✓</span> Best for casual use </li>',3))]),L.value?(l(),o("div",be,i(n.value==="Premium"?"Select 500-1,999 for Light":"Use Premium or Pro tier"),1)):(l(),o("button",{key:1,onClick:P,disabled:d.value,class:x(["w-full p-3 bg-gradient-to-r from-gray-700 to-gray-900 dark:from-gray-300 dark:to-gray-100 text-white dark:text-black rounded-lg hover:from-gray-800 hover:to-black dark:hover:from-gray-200 dark:hover:to-white transition shadow-lg mt-auto",d.value?"opacity-50 cursor-not-allowed":""])},[d.value?(l(),o("span",ve,"Processing...")):(l(),o("span",pe,"Purchase Credits"))],10,ye))],2),t("div",{class:x(["bg-white dark:bg-charcoal-900 rounded-xl shadow-lg p-6 border-2 relative flex flex-col h-full",[n.value==="Premium"?"border-gray-800 dark:border-gray-300 transform hover:scale-105 transition":"border-gray-300 dark:border-gray-600",T.value?"opacity-60":""]])},[n.value==="Premium"?(l(),o("div",fe,[...e[8]||(e[8]=[t("span",{class:"bg-gradient-to-r from-gray-700 to-gray-900 dark:from-gray-300 dark:to-gray-100 text-white dark:text-black px-4 py-1 rounded-full text-sm font-medium"}," Selected ",-1)])])):g("",!0),t("div",he,[e[9]||(e[9]=t("h3",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-2"},"Premium",-1)),t("div",ke," $"+i(I.value.toFixed(2)),1),t("p",_e,i(_.value.toLocaleString())+" credits ",1)]),t("ul",we,[t("li",Pe,[e[10]||(e[10]=t("span",{class:"text-green-500 mr-2"},"✓",-1)),y(" "+i((_.value*(a.value?.characters_per_credit||1e3)).toLocaleString())+" characters ",1)]),t("li",Se,[e[11]||(e[11]=t("span",{class:"text-green-500 mr-2"},"✓",-1)),y(" Approx. "+i(Math.round(_.value*(a.value?.characters_per_credit||1e3)/750/60))+" hours of audio ",1)]),e[12]||(e[12]=p('<li class="flex items-center text-sm text-gray-700 dark:text-gray-300"><span class="text-green-500 mr-2">✓</span> Standard voices </li><li class="flex items-center text-sm text-gray-700 dark:text-gray-300"><span class="text-green-500 mr-2">✓</span> Word highlighting </li><li class="flex items-center text-sm text-gray-700 dark:text-gray-300"><span class="text-green-500 mr-2">✓</span> Best for regular use </li>',3))]),T.value?(l(),o("div",Ee,i(n.value==="Pro"?"Use Pro tier for 10,000+":"Select 2,000-9,999 for Premium"),1)):(l(),o("button",{key:1,onClick:P,disabled:d.value,class:x(["w-full p-3 bg-gradient-to-r from-gray-700 to-gray-900 dark:from-gray-300 dark:to-gray-100 text-white dark:text-black rounded-lg hover:from-gray-800 hover:to-black dark:hover:from-gray-200 dark:hover:to-white transition shadow-lg mt-auto",d.value?"opacity-50 cursor-not-allowed":""])},[d.value?(l(),o("span",Le,"Processing...")):(l(),o("span",Te,"Purchase Credits"))],10,Ce))],2),t("div",{class:x(["bg-white dark:bg-charcoal-900 rounded-xl shadow-lg p-6 border-2 relative flex flex-col h-full",[n.value==="Pro"?"border-amber-500 transform hover:scale-105 transition":"border-gray-300 dark:border-gray-600",E.value?"opacity-60":""]])},[n.value==="Pro"?(l(),o("div",Fe,[...e[13]||(e[13]=[t("span",{class:"bg-gradient-to-r from-amber-500 to-orange-500 text-white px-4 py-1 rounded-full text-sm font-medium"}," Best Value ",-1)])])):g("",!0),t("div",Ae,[e[14]||(e[14]=t("h3",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-2"},"Pro",-1)),t("div",Be," $"+i(D.value.toFixed(2)),1),t("p",Ie,i(w.value.toLocaleString())+" credits ",1)]),t("ul",De,[t("li",Ne,[e[15]||(e[15]=t("span",{class:"text-green-500 mr-2"},"✓",-1)),y(" "+i((w.value*(a.value?.characters_per_credit||1e3)).toLocaleString())+" characters ",1)]),t("li",$e,[e[16]||(e[16]=t("span",{class:"text-green-500 mr-2"},"✓",-1)),y(" Approx. "+i(Math.round(w.value*(a.value?.characters_per_credit||1e3)/750/60))+" hours of audio ",1)]),e[17]||(e[17]=p('<li class="flex items-center text-sm text-gray-700 dark:text-gray-300"><span class="text-green-500 mr-2">✓</span> Standard + Neural voices </li><li class="flex items-center text-sm text-gray-700 dark:text-gray-300"><span class="text-green-500 mr-2">✓</span> Highest credit amounts </li><li class="flex items-center text-sm text-gray-700 dark:text-gray-300"><span class="text-green-500 mr-2">✓</span> Best for power users </li>',3))]),E.value?(l(),o("div",Me," Select 10,000+ credits for Pro ")):(l(),o("button",{key:1,onClick:P,disabled:d.value,class:x(["w-full p-3 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-lg hover:from-amber-600 hover:to-orange-600 transition shadow-lg mt-auto",d.value?"opacity-50 cursor-not-allowed":""])},[d.value?(l(),o("span",Re,"Processing...")):(l(),o("span",Ue,"Purchase Credits"))],10,Ve))],2)])):g("",!0),e[20]||(e[20]=t("div",{class:"text-center mt-12"},[t("a",{href:"/pages/index.html",class:"text-gray-800 dark:text-gray-300 hover:text-black dark:hover:text-white hover:underline"}," ← Back to Home ")],-1))])]))}}),He=H();function A(){const S=document.getElementById("app")||document.body,s=O(je);s.use(He),s.mount(S),window.subscriptionApp=s}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",A):A();
